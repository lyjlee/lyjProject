<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments::head">
</head>
<body class="bg-light">
<div class="alert alert-warning" role="alert" th:if="${account != null && !account.emailVerified}">
    이메일 인증이 완료되지 않았습니다.
    <a href="#" th:href="@{/resend-email}" class="alert-link">이메일 인증 재전송하기</a>
</div>
<div th:replace="fragments::main-nav"></div>
<div class="container py-5">
    <div th:replace="fragments::wrong-request"></div>

    <div class="row justify-content-center">
        <div class="col-sm-9">
            <div class="pt-5 text-center">
                <img th:src="${movie.img}" style="max-width: 300px">
                <div class="mt-3">
                    <h2 class="text-uppercase" th:text="${movie.subject}"></h2>
                    <p class="text-capitalize" th:text="${movie.genre}"></p>
                    <p th:text="${movie.avg_score}"></p>
                </div>
            </div>
        </div>

        <div class="py-3 col-sm-5 justify-content-center">
            <div class="justify-content-center">
                <h5>한줄평</h5>
                <div th:if="${#lists.size(movieList)}  > 0"
                     th:each="list : ${movieList}">
                    <div class="p-3 mt-2 rounded-4" th:if="${account != null && list.user_id != account.user_id}" style="background-color: #cccccc">
                        <h5 class="" th:text="${list.score}">점수</h5>
                        <div class="mb-5">
                            <p class="" th:text="${list.comment}">한줄평</p>
                        </div>
                        <p class="text-end" th:text="${list.user_id}">아이디</p>
                        <p class="text-end" th:text="${#dates.format(list.submittedAt, 'yyyy-MM-dd')}">등록일</p>
                    </div>

                    <div class="p-3 mt-2 rounded-4" th:if="${account == null}" style="background-color: #cccccc">
                        <h5 class="" th:text="${list.score}">점수</h5>
                        <p class="mb-5" th:text="${list.comment}">한줄평</p>
                        <p class="text-end" th:text="${list.user_id}">아이디</p>
                        <p class="text-end" th:text="${#dates.format(list.submittedAt, 'yyyy-MM-dd')}">등록일</p>
                    </div>
                </div>
            </div>

            <div class="justify-content-center mt-2" th:if="${myComment != null}">
                <p>나의 한줄평</p>
                <div class="p-3 mt-2 rounded-4" style="background-color: #666699">
                   <h5 class="" th:text="${myComment.score}">점수</h5>
                   <p class="mb-5" th:text="${myComment.comment}">한줄평</p>
                   <p class="text-end" th:text="${myComment.user_id}">아이디</p>
                   <p class="text-end" th:text="${#dates.format(myComment.submittedAt, 'yyyy-MM-dd')}">등록일</p>
                    <div class="text-end">
                        <button class="btn btn-primary">수정</button>
                        <button class="btn btn-danger">삭제</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script th:replace="fragments::logout"></script>
<script src="/node_modules/summernote/dist/summernote-lite.js"></script>
<script src="/node_modules/summernote/dist/lang/summernote-ko-KR.js"></script>
<script th:replace="fragments.html :: ajax-csrf-header"></script>

<script type="application/javascript" th:inline="javascript">


</script>